"use strict";(self.webpackChunkyks_quiz=self.webpackChunkyks_quiz||[]).push([[363],{7574:(e,t,n)=>{n.d(t,{eu:()=>r,pX:()=>i,zu:()=>s});class a{constructor(){this.metrics=new Map,this.observers=[],this.initObservers()}static getInstance(){return a.instance||(a.instance=new a),a.instance}initObservers(){if("PerformanceObserver"in window){const t=new PerformanceObserver(e=>{for(const t of e.getEntries())if("navigation"===t.entryType){const e=t;this.recordMetric("navigation",e.loadEventEnd-e.loadEventStart)}});try{t.observe({entryTypes:["navigation"]}),this.observers.push(t)}catch(e){console.warn("Navigation timing not supported")}const n=new PerformanceObserver(e=>{for(const t of e.getEntries())"paint"===t.entryType&&this.recordMetric("paint",t.startTime)});try{n.observe({entryTypes:["paint"]}),this.observers.push(n)}catch(e){console.warn("Paint timing not supported")}}}recordMetric(e,t){this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push(t)}getAverageMetric(e){const t=this.metrics.get(e);return t&&0!==t.length?t.reduce((e,t)=>e+t,0)/t.length:0}getMetrics(){const e={};return this.metrics.forEach((t,n)=>{e[n]=[...t]}),e}measureAsync(e,t){const n=performance.now();return t().finally(()=>{const t=performance.now()-n;this.recordMetric(e,t)})}measureSync(e,t){const n=performance.now();try{return t()}finally{const t=performance.now()-n;this.recordMetric(e,t)}}reportMetrics(){const e=this.getMetrics();console.log("Performance Metrics:",e),this.sendToAnalytics(e)}sendToAnalytics(e){try{"undefined"!==typeof window&&window.gtag&&Object.entries(e).forEach(e=>{let[t,n]=e;const a=n.reduce((e,t)=>e+t,0)/n.length;window.gtag("event","performance_metric",{metric_name:t,metric_value:a,metric_count:n.length})})}catch(t){console.warn("Failed to send metrics to analytics:",t)}}destroy(){this.observers.forEach(e=>e.disconnect()),this.observers=[],this.metrics.clear()}}a.instance=void 0;const r=()=>{const e=a.getInstance();return{measureAsync:(t,n)=>e.measureAsync(t,n),measureSync:(t,n)=>e.measureSync(t,n),recordMetric:(t,n)=>{e.recordMetric(t,n)},getMetrics:()=>e.getMetrics(),reportMetrics:()=>e.reportMetrics()}},i=()=>{if("memory"in performance){const e=performance.memory;return{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit}}return null},s=()=>{if("connection"in navigator){const e=navigator.connection;return{effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt}}return null}},9363:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(2555),r=n(5043),i=n(3216),s=n(5472),o=n(6883),l=n(9066),c=n(7574),d=n(1185);var u={};!function e(t,n,a,r){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),s="function"===typeof Path2D&&"function"===typeof DOMMatrix,o=function(){if(!t.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),n=e.getContext("2d");n.fillRect(0,0,1,1);var a=e.transferToImageBitmap();try{n.createPattern(a,"no-repeat")}catch(r){return!1}return!0}();function l(){}function c(e){var a=n.exports.Promise,r=void 0!==a?a:t.Promise;return"function"===typeof r?new r(e):(e(l,l),null)}var d,u,h,f=(d=o,u=new Map,{transform:function(e){if(d)return e;if(u.has(e))return u.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),u.set(e,t),t},clear:function(){u.clear()}}),p=function(){var e,t,n=Math.floor(1e3/60),a={},r=0;return"function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?(e=function(e){var t=Math.random();return a[t]=requestAnimationFrame(function i(s){r===s||r+n-1<s?(r=s,delete a[t],e()):a[t]=requestAnimationFrame(i)}),t},t=function(e){a[e]&&cancelAnimationFrame(a[e])}):(e=function(e){return setTimeout(e,n)},t=function(e){return clearTimeout(e)}),{frame:e,cancel:t}}(),m=function(){var t,n,r={};return function(){if(t)return t;if(!a&&i){var s=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{t=new Worker(URL.createObjectURL(new Blob([s])))}catch(o){return void 0!==typeof console&&"function"===typeof console.warn&&console.warn("\ud83c\udf8a Could not load worker",o),null}!function(e){function t(t,n){e.postMessage({options:t||{},callback:n})}e.init=function(t){var n=t.transferControlToOffscreen();e.postMessage({canvas:n},[n])},e.fire=function(a,i,s){if(n)return t(a,null),n;var o=Math.random().toString(36).slice(2);return n=c(function(i){function l(t){t.data.callback===o&&(delete r[o],e.removeEventListener("message",l),n=null,f.clear(),s(),i())}e.addEventListener("message",l),t(a,o),r[o]=l.bind(null,{data:{callback:o}})})},e.reset=function(){for(var t in e.postMessage({reset:!0}),r)r[t](),delete r[t]}}(t)}return t}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function x(e,t,n){return function(e,t){return t?t(e):e}(e&&(null!==(a=e[t])&&void 0!==a)?e[t]:g[t],n);var a}function y(e){return e<0?0:Math.floor(e)}function b(e,t){return Math.floor(Math.random()*(t-e))+e}function v(e){return parseInt(e,16)}function j(e){return e.map(w)}function w(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:v(t.substring(0,2)),g:v(t.substring(2,4)),b:v(t.substring(4,6))}}function S(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function k(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function M(e){var t=e.angle*(Math.PI/180),n=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*n-Math.random()*n),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function z(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var n=t.tick++/t.totalTicks,a=t.x+t.random*t.tiltCos,r=t.y+t.random*t.tiltSin,i=t.wobbleX+t.random*t.tiltCos,o=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-n)+")",e.beginPath(),s&&"path"===t.shape.type&&"string"===typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,n,a,r,i,s){var o=new Path2D(e),l=new Path2D;l.addPath(o,new DOMMatrix(t));var c=new Path2D;return c.addPath(l,new DOMMatrix([Math.cos(s)*r,Math.sin(s)*r,-Math.sin(s)*i,Math.cos(s)*i,n,a])),c}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(i-a),.1*Math.abs(o-r),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var l=Math.PI/10*t.wobble,c=.1*Math.abs(i-a),d=.1*Math.abs(o-r),u=t.shape.bitmap.width*t.scalar,h=t.shape.bitmap.height*t.scalar,p=new DOMMatrix([Math.cos(l)*c,Math.sin(l)*c,-Math.sin(l)*d,Math.cos(l)*d,t.x,t.y]);p.multiplySelf(new DOMMatrix(t.shape.matrix));var m=e.createPattern(f.transform(t.shape.bitmap),"no-repeat");m.setTransform(p),e.globalAlpha=1-n,e.fillStyle=m,e.fillRect(t.x-u/2,t.y-h/2,u,h),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(i-a)*t.ovalScalar,Math.abs(o-r)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,n,a,r,i,s,o,l){e.save(),e.translate(t,n),e.rotate(i),e.scale(a,r),e.arc(0,0,1,s,o,l),e.restore()}(e,t.x,t.y,Math.abs(i-a)*t.ovalScalar,Math.abs(o-r)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var g=Math.PI/2*3,x=4*t.scalar,y=8*t.scalar,b=t.x,v=t.y,j=5,w=Math.PI/j;j--;)b=t.x+Math.cos(g)*y,v=t.y+Math.sin(g)*y,e.lineTo(b,v),g+=w,b=t.x+Math.cos(g)*x,v=t.y+Math.sin(g)*x,e.lineTo(b,v),g+=w;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(r)),e.lineTo(Math.floor(i),Math.floor(o)),e.lineTo(Math.floor(a),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function C(e,n){var s,o=!e,l=!!x(n||{},"resize"),d=!1,u=x(n,"disableForReducedMotion",Boolean),h=i&&!!x(n||{},"useWorker")?m():null,g=o?S:k,v=!(!e||!h)&&!!e.__confetti_initialized,w="function"===typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function C(t,n,i){for(var o=x(t,"particleCount",y),l=x(t,"angle",Number),d=x(t,"spread",Number),u=x(t,"startVelocity",Number),h=x(t,"decay",Number),m=x(t,"gravity",Number),v=x(t,"drift",Number),w=x(t,"colors",j),S=x(t,"ticks",Number),k=x(t,"shapes"),C=x(t,"scalar"),T=!!x(t,"flat"),I=function(e){var t=x(e,"origin",Object);return t.x=x(t,"x",Number),t.y=x(t,"y",Number),t}(t),A=o,N=[],E=e.width*I.x,B=e.height*I.y;A--;)N.push(M({x:E,y:B,angle:l,spread:d,startVelocity:u,color:w[A%w.length],shape:k[b(0,k.length)],ticks:S,decay:h,gravity:m,drift:v,scalar:C,flat:T}));return s?s.addFettis(N):(s=function(e,t,n,i,s){var o,l,d=t.slice(),u=e.getContext("2d"),h=c(function(t){function c(){o=l=null,u.clearRect(0,0,i.width,i.height),f.clear(),s(),t()}o=p.frame(function t(){!a||i.width===r.width&&i.height===r.height||(i.width=e.width=r.width,i.height=e.height=r.height),i.width||i.height||(n(e),i.width=e.width,i.height=e.height),u.clearRect(0,0,i.width,i.height),(d=d.filter(function(e){return z(u,e)})).length?o=p.frame(t):c()}),l=c});return{addFettis:function(e){return d=d.concat(e),h},canvas:e,promise:h,reset:function(){o&&p.cancel(o),l&&l()}}}(e,N,g,n,i),s.promise)}function T(n){var a=u||x(n,"disableForReducedMotion",Boolean),r=x(n,"zIndex",Number);if(a&&w)return c(function(e){e()});o&&s?e=s.canvas:o&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(r),document.body.appendChild(e)),l&&!v&&g(e);var i={width:e.width,height:e.height};function f(){if(h){var t={getBoundingClientRect:function(){if(!o)return e.getBoundingClientRect()}};return g(t),void h.postMessage({resize:{width:t.width,height:t.height}})}i.width=i.height=null}function p(){s=null,l&&(d=!1,t.removeEventListener("resize",f)),o&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,v=!1)}return h&&!v&&h.init(e),v=!0,h&&(e.__confetti_initialized=!0),l&&!d&&(d=!0,t.addEventListener("resize",f,!1)),h?h.fire(n,i,p):C(n,i,p)}return T.reset=function(){h&&h.reset(),s&&s.reset()},T}function T(){return h||(h=C(null,{useWorker:!0,resize:!0})),h}n.exports=function(){return T().apply(this,arguments)},n.exports.reset=function(){T().reset()},n.exports.create=C,n.exports.shapeFromPath=function(e){if(!s)throw new Error("path confetti are not supported in this browser");var t,n;"string"===typeof e?t=e:(t=e.path,n=e.matrix);var a=new Path2D(t),r=document.createElement("canvas").getContext("2d");if(!n){for(var i,o,l=1e3,c=l,d=l,u=0,h=0,f=0;f<l;f+=2)for(var p=0;p<l;p+=2)r.isPointInPath(a,f,p,"nonzero")&&(c=Math.min(c,f),d=Math.min(d,p),u=Math.max(u,f),h=Math.max(h,p));i=u-c,o=h-d;var m=Math.min(10/i,10/o);n=[m,0,0,m,-Math.round(i/2+c)*m,-Math.round(o/2+d)*m]}return{type:"path",path:t,matrix:n}},n.exports.shapeFromText=function(e){var t,n=1,a="#000000",r='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"===typeof e?t=e:(t=e.text,n="scalar"in e?e.scalar:n,r="fontFamily"in e?e.fontFamily:r,a="color"in e?e.color:a);var i=10*n,s=i+"px "+r,o=new OffscreenCanvas(i,i),l=o.getContext("2d");l.font=s;var c=l.measureText(t),d=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),u=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),h=c.actualBoundingBoxLeft+2,f=c.actualBoundingBoxAscent+2;d+=4,u+=4,(l=(o=new OffscreenCanvas(d,u)).getContext("2d")).font=s,l.fillStyle=a,l.fillText(t,h,f);var p=1/n;return{type:"bitmap",bitmap:o.transferToImageBitmap(),matrix:[p,0,0,p,-d*p/2,-u*p/2]}}}(function(){return"undefined"!==typeof window?window:"undefined"!==typeof self?self:this||{}}(),u,!1);const h=u.exports;u.exports.create;var f=n(579);const p=["eliminate","extraTime","doubleAnswer","autoCorrect"],m={eliminate:"\u2797",extraTime:"\u23f0",doubleAnswer:"2\ufe0f\u20e3",autoCorrect:"\u2705"};const g=()=>{const{subTopic:e,testNumber:t}=(0,i.g)(),n=(0,i.Zp)(),{updateUserStats:u,user:g,updateUser:x,refreshUser:y}=(0,l.As)(),{measureAsync:b,measureSync:v,recordMetric:j}=(0,c.eu)(),{variant:w,config:S,trackEvent:k}=(0,d.HC)("quiz_ui_variant"),{variant:M,config:z,trackEvent:C}=(0,d.HC)("question_loading"),[T,I]=(0,r.useState)(0),[A,N]=(0,r.useState)(null),[E,B]=(0,r.useState)(600),[P,R]=(0,r.useState)(!1),[W,q]=(0,r.useState)(0),[O,D]=(0,r.useState)([]),[F,_]=(0,r.useState)(!0),[L,H]=(0,r.useState)(null),[X,U]=(0,r.useState)([]),[Y,K]=(0,r.useState)([]),[J,Z]=(0,r.useState)(!1),[G,V]=(0,r.useState)(!1),[Q,$]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(0),[ne,ae]=(0,r.useState)(0),[re,ie]=(0,r.useState)(0),[se,oe]=(0,r.useState)(!1),[le,ce]=(0,r.useState)(null),[de,ue]=(0,r.useState)(null),he=(0,r.useRef)(null),fe=(0,r.useRef)(new Map),pe=(0,r.useMemo)(()=>O.length>0?(T+1)/O.length*100:0,[T,O.length]),me=(0,r.useMemo)(()=>O[T]||null,[O,T]);(0,r.useEffect)(()=>{k("quiz_started",{variant:w,config:S}),C("quiz_started",{variant:M,config:z})},[w,S,M,z,k,C]),(0,r.useEffect)(()=>{e&&t?(async()=>{b("fetchQuestions",async()=>{try{_(!0),H(null);const n="".concat(e,"-").concat(t);if(fe.current.has(n))return D(fe.current.get(n)),_(!1),j("cache_hit",1),void C("cache_hit",{cacheKey:n});const r=(0,s.rJ)(o.db,"questions"),i=(0,s.P)(r,(0,s._M)("topicId","==",e),(0,s._M)("testNumber","==",parseInt(t||"1"))),l=await(0,s.GG)(i);if(l.empty)return H("Bu test i\xe7in soru bulunamad\u0131."),void _(!1);const c=l.docs.map(e=>(0,a.A)({id:e.id},e.data())),d=z.cacheSize||10;fe.current.size<d&&fe.current.set(n,c),D(c),_(!1),j("questions_loaded",c.length),C("questions_loaded",{count:c.length,variant:M})}catch(n){console.error("\ud83d\udeab Firebase hatas\u0131:",n),H("Sorular y\xfcklenirken bir hata olu\u015ftu."),_(!1),j("fetch_error",1),C("fetch_error",{error:n})}})})():(H("Ge\xe7ersiz quiz parametreleri."),_(!1))},[e,t,b,j,C,z,M]),(0,r.useEffect)(()=>{y&&y().then(()=>{0})},[y]),(0,r.useEffect)(()=>{null!==g&&void 0!==g&&g.jokers,0},[null===g||void 0===g?void 0:g.jokers,null===g||void 0===g?void 0:g.jokersUsed]),(0,r.useEffect)(()=>{if(E>0&&!F&&O.length>0)return he.current=setInterval(()=>{B(e=>e-1)},1e3),()=>{he.current&&clearInterval(he.current)};0===E&&be()},[E,F,O.length]);const ge=(0,r.useCallback)(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))},[]),xe=(0,r.useCallback)(e=>{if(!P)if(J){if(Y.includes(e))return;const t=[...Y,e];K(t),2===t.length&&(R(!0),t.includes(O[T].correctAnswer)&&q(e=>e+1))}else N(e),R(!0),e===O[T].correctAnswer&&q(e=>e+1)},[P,J,Y,O,T]),ye=(0,r.useCallback)(()=>{T<O.length-1?(I(e=>e+1),N(null),R(!1),K([]),Z(!1),V(!1)):be(W)},[T,O.length,W]),be=async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;try{te(600-E),$(!0),await(async(n,r)=>{if(g&&e&&t)try{const l=window.location.pathname.split("/")[1];let c="".concat(l,"_").concat(e);"turkce"===l&&(c="quiz_".concat(e));const d=t,u=Math.round(n/r*100),h=n>=7;console.log("\ud83c\udfaf Test Sonucu Kaydediliyor:",{finalScore:n,totalQuestions:r,percentage:u,completed:h,subjectTopicKey:c,testId:d});const f={score:n,total:r,percentage:u,completed:h,attempts:1},p=g.testResults||{},m=p[c]||{};m[d]&&(f.attempts=m[d].attempts+1);const y=(0,a.A)((0,a.A)({},m),{},{[d]:f}),b=(0,a.A)((0,a.A)({},p),{},{[c]:y});try{const e=(0,s.H9)(o.db,"users",g.id);await(0,s.mZ)(e,{testResults:b}),console.log("\u2705 Firestore'a test sonu\xe7lar\u0131 kaydedildi")}catch(i){throw console.error("\u274c Firestore hatas\u0131 (testResults):",i),new Error("Test sonucu kaydedilemedi")}x((0,a.A)((0,a.A)({},g),{},{testResults:b})),console.log("\u2705 Local state g\xfcncellendi"),console.log("\ud83c\udf89 Test sonucu ba\u015far\u0131yla kaydedildi:",f),h?console.log("\u2705 Test ba\u015far\u0131yla tamamland\u0131! Bir sonraki test i\xe7in coin ile sat\u0131n alma gerekli."):console.log("\u274c Test ba\u015far\u0131s\u0131z, bir sonraki test i\xe7in \xf6nce bu testi ba\u015far\u0131yla tamamlaman\u0131z gerekli.")}catch(L){console.error("\u274c Test sonucu kaydetme hatas\u0131:",L)}else console.error("\u274c Test sonucu kaydedilemedi: Gerekli parametreler eksik")})(n,O.length),await u(n,O.length,e||"",600-E);let r=null;g&&(r=await(0,l.EL)({user:g,correct:n,total:O.length,testNumber:parseInt(t||"1")}),r&&console.log("XP Sonucu:",r),r&&"number"===typeof r.gainedXp&&(ae(r.gainedXp),ie(r.gainedXp)))}catch(r){H("\u0130statistikler kaydedilemedi. L\xfctfen tekrar deneyin.")}},ve=()=>{n(e&&t?"/quiz/".concat(window.location.pathname.split("/")[1],"/").concat(e,"/").concat(t):-1)},je=()=>{n(-1)},we={eliminate:50,extraTime:75,doubleAnswer:100,autoCorrect:150},Se=async e=>{if(g&&g.jokers&&g.jokersUsed)try{const{newJokers:t,newJokersUsed:n}=await(0,l.jM)(g.id,g.jokers,g.jokersUsed,e);if(x((0,a.A)((0,a.A)({},g),{},{jokers:t,jokersUsed:n})),y&&y(),"eliminate"===e){const e=O[T];if(!e)return;const t=[0,1,2,3].filter(t=>t!==e.correctAnswer).sort(()=>Math.random()-.5);U(t.slice(0,2))}"extraTime"===e&&B(e=>e+60),"doubleAnswer"===e&&(Z(!0),K([])),"autoCorrect"===e&&(V(!0),N(O[T].correctAnswer),R(!0),q(e=>e+1))}catch(t){alert(t.message)}};if((0,r.useEffect)(()=>{U([]),Z(!1),K([]),V(!1)},[T]),(0,r.useEffect)(()=>{if(Q){(O.length>0?Math.round(W/O.length*100):0)>=70&&"function"===typeof h&&h({particleCount:120,spread:80,origin:{y:.6},zIndex:9999})}},[Q]),F)return(0,f.jsx)("div",{className:"quiz-container",children:(0,f.jsxs)("div",{className:"quiz-loading",children:[(0,f.jsx)("div",{className:"loading-spinner"}),(0,f.jsx)("p",{children:"Quiz y\xfckleniyor..."})]})});if(L)return(0,f.jsx)("div",{className:"quiz-container",children:(0,f.jsxs)("div",{className:"quiz-error",children:[(0,f.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,f.jsx)("h2",{children:"Hata"}),(0,f.jsx)("p",{children:L}),(0,f.jsxs)("div",{className:"error-actions",children:[(0,f.jsx)("button",{onClick:ve,className:"retry-button",children:"Tekrar Dene"}),(0,f.jsx)("button",{onClick:je,className:"back-button",children:"Geri D\xf6n"})]})]})});if(0===O.length)return(0,f.jsx)("div",{className:"quiz-container",children:(0,f.jsxs)("div",{className:"quiz-error",children:[(0,f.jsx)("div",{className:"error-icon",children:"\ud83d\udcdd"}),(0,f.jsx)("h2",{children:"Soru Bulunamad\u0131"}),(0,f.jsx)("p",{children:"Bu test i\xe7in hen\xfcz soru eklenmemi\u015f."}),(0,f.jsx)("button",{onClick:je,className:"back-button",children:"Geri D\xf6n"})]})});if(Q){const e=O.length>0?Math.round(W/O.length*100):0,t=W>=7;return(0,f.jsx)("div",{className:"quiz-container",children:(0,f.jsxs)("div",{className:"quiz-stats-card animated-stats-card",style:{maxWidth:540,margin:"64px auto",background:"linear-gradient(120deg, #f8fafc 0%, #e0c3fc 100%)",borderRadius:40,boxShadow:"0 12px 48px #764ba244, 0 2px 12px #fff8",padding:48,textAlign:"center",position:"relative",minHeight:440,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",animation:"popInStats 1.1s cubic-bezier(.39,.575,.56,1.000)"},children:[(0,f.jsx)("h2",{style:{color:"#764ba2",fontWeight:900,marginBottom:24,fontSize:34,letterSpacing:1},children:"\ud83c\udf89 Quiz Sonu\xe7lar\u0131 \ud83c\udf89"}),(0,f.jsx)("div",{style:{padding:"16px 24px",borderRadius:16,marginBottom:24,fontWeight:800,fontSize:20,background:t?"linear-gradient(90deg, #d4edda 0%, #c3e6cb 100%)":"linear-gradient(90deg, #f8d7da 0%, #f5c6cb 100%)",color:t?"#155724":"#721c24",border:"3px solid ".concat(t?"#28a745":"#dc3545"),boxShadow:"0 4px 16px ".concat(t?"#28a74533":"#dc354533")},children:t?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{style:{fontSize:24,marginRight:8},children:"\u2705"}),"Ba\u015far\u0131 Sa\u011fland\u0131! (%",e,")"]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{style:{fontSize:24,marginRight:8},children:"\u274c"}),"Ba\u015far\u0131 Sa\u011flanamad\u0131! (%",e,")"]})}),(0,f.jsxs)("div",{style:{display:"flex",gap:24,justifyContent:"center",marginBottom:28},children:[(0,f.jsxs)("div",{style:{background:"linear-gradient(90deg, #f59e42 0%, #ffe082 100%)",borderRadius:18,boxShadow:"0 2px 12px #f59e4255",padding:"18px 32px",fontWeight:900,fontSize:28,color:"#fff",display:"flex",alignItems:"center",gap:12,minWidth:120,justifyContent:"center"},children:[(0,f.jsx)("span",{style:{fontSize:36,marginRight:6},children:"\u2b50"}),(0,f.jsx)("span",{style:{fontSize:32},children:ne}),(0,f.jsx)("span",{style:{fontWeight:700,fontSize:18,color:"#fffbe7",marginLeft:6},children:"XP"})]}),(0,f.jsxs)("div",{style:{background:"linear-gradient(90deg, #ffe082 0%, #ffd54f 100%)",borderRadius:18,boxShadow:"0 2px 12px #ffecb355",padding:"18px 32px",fontWeight:900,fontSize:28,color:"#ffb300",display:"flex",alignItems:"center",gap:12,minWidth:120,justifyContent:"center"},children:[(0,f.jsx)("span",{style:{fontSize:36,marginRight:6},children:"\ud83e\ude99"}),(0,f.jsx)("span",{style:{fontSize:32},children:re}),(0,f.jsx)("span",{style:{fontWeight:700,fontSize:18,color:"#bfa040",marginLeft:6},children:"coin"})]})]}),(0,f.jsxs)("div",{style:{fontSize:26,fontWeight:800,marginBottom:18},children:["Do\u011fru: ",(0,f.jsx)("span",{style:{color:"#22c55e"},children:W})," / Yanl\u0131\u015f: ",(0,f.jsx)("span",{style:{color:"#ef4444"},children:O.length-W})]}),(0,f.jsxs)("div",{style:{fontSize:22,marginBottom:10},children:["Ba\u015far\u0131 Oran\u0131: ",(0,f.jsxs)("b",{style:{color:"#2563eb"},children:[e,"%"]})]}),(0,f.jsxs)("div",{style:{fontSize:22,marginBottom:10},children:["Toplam S\xfcre: ",(0,f.jsx)("b",{style:{color:"#7c3aed"},children:ge(ee)})]}),(0,f.jsxs)("div",{style:{display:"flex",gap:16,marginTop:32,flexWrap:"wrap",justifyContent:"center"},children:[t?(0,f.jsx)("button",{onClick:()=>n(-1),style:{padding:"16px 44px",background:"linear-gradient(90deg,#28a745,#20c997)",color:"#fff",border:"none",borderRadius:16,fontWeight:800,fontSize:22,cursor:"pointer",boxShadow:"0 6px 24px #28a74544",letterSpacing:1},children:"\u2705 Testi Se\xe7imine D\xf6n"}):(0,f.jsx)("button",{onClick:()=>n(-1),style:{padding:"16px 44px",background:"linear-gradient(90deg,#dc3545,#fd7e14)",color:"#fff",border:"none",borderRadius:16,fontWeight:800,fontSize:22,cursor:"pointer",boxShadow:"0 6px 24px #dc354544",letterSpacing:1},children:"\ud83d\udd04 Test Se\xe7imine D\xf6n"}),(0,f.jsx)("button",{onClick:()=>n("/"),style:{padding:"16px 44px",background:"linear-gradient(90deg,#667eea,#764ba2)",color:"#fff",border:"none",borderRadius:16,fontWeight:800,fontSize:22,cursor:"pointer",boxShadow:"0 6px 24px #764ba244",letterSpacing:1},children:"\ud83c\udfe0 Ana Sayfaya D\xf6n"})]}),(0,f.jsxs)("div",{style:{marginTop:28},children:[(0,f.jsxs)("button",{onClick:()=>oe(e=>!e),style:{background:"none",border:"2px solid #764ba2",color:"#764ba2",borderRadius:10,padding:"8px 24px",fontWeight:700,cursor:"pointer",fontSize:17,marginBottom:8,transition:"all 0.2s"},children:["XP Kazanma Kurallar\u0131 ",se?"\u25b2":"\u25bc"]}),se&&(0,f.jsxs)("div",{style:{fontSize:17,color:"#333",marginTop:8,background:"linear-gradient(120deg, #fffbe7 0%, #e0c3fc22 100%)",borderRadius:14,padding:18,textAlign:"left",boxShadow:"0 2px 12px #764ba211",fontWeight:500,border:"1.5px solid #ffe082",maxWidth:340,marginLeft:"auto",marginRight:"auto"},children:[(0,f.jsx)("div",{style:{fontWeight:900,fontSize:19,color:"#a084ee",marginBottom:10,textAlign:"center",letterSpacing:1},children:"XP & Coin Kazanma Kurallar\u0131"}),(0,f.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0},children:[(0,f.jsxs)("li",{style:{marginBottom:10,display:"flex",alignItems:"center",gap:8},children:[(0,f.jsx)("span",{style:{fontSize:22},children:"\u2705"}),(0,f.jsxs)("span",{children:["Her do\u011fru cevap: ",(0,f.jsx)("b",{style:{color:"#f59e42"},children:"+20 XP"})," ",(0,f.jsx)("span",{style:{color:"#bfa040",fontWeight:700},children:"ve"})," ",(0,f.jsx)("b",{style:{color:"#ffb300"},children:"+20 coin"})]})]}),(0,f.jsxs)("li",{style:{marginBottom:10,display:"flex",alignItems:"center",gap:8},children:[(0,f.jsx)("span",{style:{fontSize:22},children:"\ud83c\udfc6"}),(0,f.jsxs)("span",{children:["%100 ba\u015far\u0131: ",(0,f.jsx)("b",{style:{color:"#f59e42"},children:"2 kat\u0131 XP"})," ",(0,f.jsx)("span",{style:{color:"#bfa040",fontWeight:700},children:"ve"})," ",(0,f.jsx)("b",{style:{color:"#ffb300"},children:"2 kat\u0131 coin"})]})]}),(0,f.jsxs)("li",{style:{marginBottom:10,display:"flex",alignItems:"center",gap:8},children:[(0,f.jsx)("span",{style:{fontSize:22},children:"\ud83d\udc4d"}),(0,f.jsxs)("span",{children:["%70 ve \xfczeri ba\u015far\u0131: ",(0,f.jsx)("b",{style:{color:"#f59e42"},children:"Standart XP"})," ",(0,f.jsx)("span",{style:{color:"#bfa040",fontWeight:700},children:"ve"})," ",(0,f.jsx)("b",{style:{color:"#ffb300"},children:"standart coin"})]})]}),(0,f.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,f.jsx)("span",{style:{fontSize:22},children:"\ud83d\udfe0"}),(0,f.jsxs)("span",{children:["Daha d\xfc\u015f\xfck ba\u015far\u0131: ",(0,f.jsx)("b",{style:{color:"#f59e42"},children:"Yar\u0131 XP"})," ",(0,f.jsx)("span",{style:{color:"#bfa040",fontWeight:700},children:"ve"})," ",(0,f.jsx)("b",{style:{color:"#ffb300"},children:"yar\u0131 coin"})]})]})]})]})]}),(0,f.jsx)("style",{children:"\n            @keyframes popInStats {\n              0% { opacity: 0; transform: scale(0.7) translateY(60px); }\n              60% { opacity: 1; transform: scale(1.08) translateY(-8px); }\n              80% { transform: scale(0.98) translateY(4px); }\n              100% { opacity: 1; transform: scale(1) translateY(0); }\n            }\n          "})]})})}return(0,f.jsxs)("div",{className:"quiz-container",children:[(0,f.jsxs)("div",{className:"quiz-background",children:[(0,f.jsx)("div",{className:"geometric-shape shape-1"}),(0,f.jsx)("div",{className:"geometric-shape shape-2"}),(0,f.jsx)("div",{className:"geometric-shape shape-3"})]}),(0,f.jsxs)("div",{className:"quiz-card",children:[g&&g.jokers&&g.jokersUsed&&(0,f.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24,marginTop:16,flexWrap:"wrap",padding:"16px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"16px",backdropFilter:"blur(10px)",border:"1px solid rgba(118, 75, 162, 0.1)"},children:p.map(e=>{const t=g.jokers[e].count,n=0===t,r=we[e];return(0,f.jsxs)("div",{className:"joker-emoji-box ".concat(n?"disabled":""),style:{minWidth:70,minHeight:80,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:n?.6:1,cursor:"pointer",position:"relative"},title:"".concat("eliminate"===e?"2 \u015e\u0131k Eleme":"extraTime"===e?"Ekstra 60sn":"doubleAnswer"===e?"\xc7ift Cevap":"Do\u011fru Kabul"," - Kullan\u0131ld\u0131: ").concat(g.jokersUsed[e]||0),onClick:t=>{if(n)(async e=>{if(g){ce(e),ue(null);try{var t,n;const r=we[e];if((g.coins||0)<r)return void ue("Yetersiz coin! Bu joker i\xe7in daha fazla coin gerekli.");const i=(null===(t=g.jokers)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.count)||0;if(i>=3)return void ue("Bu jokerden zaten maksimum miktarda (3 adet) sahipsiniz!");const l=(0,s.H9)(o.db,"users",g.id),c={coins:(0,s.GV)(-r),["jokers.".concat(e,".count")]:(0,s.GV)(1)};await(0,s.mZ)(l,c);const d=(0,a.A)({},g);d.coins=(g.coins||0)-r,d.jokers=(0,a.A)({},g.jokers),d.jokers[e].count=Math.min(i+1,3),x(d),ue("\u2705 Joker ba\u015far\u0131yla sat\u0131n al\u0131nd\u0131!"),setTimeout(()=>ue(null),2e3)}catch(L){console.error("Joker sat\u0131n alma hatas\u0131:",L),ue("\u274c Sat\u0131n alma s\u0131ras\u0131nda bir hata olu\u015ftu. L\xfctfen tekrar deneyin.")}finally{ce(null)}}})(e);else if("autoCorrect"!==e){const n=t.currentTarget;n&&n.classList&&(n.classList.add("joker-emoji-clicked"),setTimeout(()=>{n&&n.classList&&n.classList.remove("joker-emoji-clicked")},400)),Se(e)}else Se(e)},children:[(0,f.jsx)("span",{className:"joker-emoji",style:{fontSize:32,marginBottom:6,filter:n?"grayscale(1)":"none"},children:m[e]}),n?(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[(0,f.jsxs)("span",{style:{fontSize:12,color:"#ffb300",fontWeight:700,display:"flex",alignItems:"center",gap:2},children:[(0,f.jsx)("span",{style:{fontSize:10},children:"\ud83e\ude99"}),r]}),(0,f.jsx)("span",{style:{fontSize:10,color:"#999",textAlign:"center",lineHeight:1.2},children:le===e?"Y\xfckleniyor...":"Sat\u0131n Al"})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{style:{fontSize:16,color:"#764ba2",fontWeight:700,marginBottom:2},children:t}),(0,f.jsxs)("span",{style:{fontSize:10,color:"#999",textAlign:"center",lineHeight:1.2},children:["Kullan\u0131ld\u0131: ",g.jokersUsed[e]||0]})]})]},e)})}),de&&(0,f.jsx)("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,padding:"12px 24px",borderRadius:"12px",background:de.includes("\u2705")?"#d4edda":"#f8d7da",color:de.includes("\u2705")?"#155724":"#721c24",fontWeight:600,fontSize:"14px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",border:"2px solid ".concat(de.includes("\u2705")?"#c3e6cb":"#f5c6cb")},children:de}),(0,f.jsx)("div",{className:"quiz-header",children:(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",marginBottom:18,position:"relative"},children:[(0,f.jsx)("h1",{style:{flex:1,textAlign:"left",fontSize:32,fontWeight:900,color:"#7c3aed",margin:0,letterSpacing:1},children:"Quiz"}),(0,f.jsxs)("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",zIndex:10,background:"linear-gradient(90deg, #f8fafc 0%, #e0c3fc 100%)",borderRadius:18,boxShadow:"0 2px 12px #764ba244",padding:"8px 28px",fontWeight:900,fontSize:20,color:"#222",display:"flex",alignItems:"center",gap:16,border:"2px solid #e0c3fc"},children:[(0,f.jsxs)("span",{children:["Do\u011fru: ",(0,f.jsx)("span",{style:{color:"#22c55e",fontWeight:900},children:W})]}),(0,f.jsx)("span",{children:"/"}),(0,f.jsxs)("span",{children:["Yanl\u0131\u015f: ",(0,f.jsx)("span",{style:{color:"#ef4444",fontWeight:900},children:T-W>=0?T-W:0})]})]}),(0,f.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:12},children:[(0,f.jsxs)("div",{style:{background:"#f3e8ff",borderRadius:12,padding:"6px 18px",fontWeight:700,color:"#7c3aed",fontSize:20,display:"flex",alignItems:"center",gap:6},children:[(0,f.jsx)("span",{style:{fontSize:20},children:"\u23f1\ufe0f"}),(0,f.jsx)("span",{children:ge(E)})]}),(0,f.jsxs)("span",{style:{color:"#888",fontWeight:600,fontSize:16},children:["Soru ",T+1," / ",O.length]})]})]})}),(0,f.jsx)("div",{className:"progress-container",children:(0,f.jsx)("div",{className:"progress-bar",children:(0,f.jsx)("div",{className:"progress-fill",style:{width:"".concat(pe,"%")}})})}),(0,f.jsxs)("div",{className:"question-section",children:[(0,f.jsxs)("div",{className:"question-number",children:["Soru ",T+1]}),(0,f.jsx)("div",{className:"question-text",children:me.question})]}),(0,f.jsx)("div",{className:"answer-options",children:me.options.map((e,t)=>(0,f.jsxs)("button",{className:"answer-button ".concat(J?Y.includes(t)?t===me.correctAnswer?"correct":"incorrect":"":A===t?t===me.correctAnswer?"correct":"incorrect":""," ").concat(P&&t===me.correctAnswer?"correct":""," ").concat(X.includes(t)?"eliminated":""),onClick:()=>xe(t),disabled:P,children:[(0,f.jsx)("span",{className:"answer-letter",children:String.fromCharCode(65+t)}),(0,f.jsx)("span",{className:"answer-text",children:e})]},t))}),P&&me.explanation&&(0,f.jsxs)("div",{className:"explanation",children:[(0,f.jsx)("h4",{children:"A\xe7\u0131klama:"}),(0,f.jsx)("p",{children:me.explanation})]}),(0,f.jsx)("div",{className:"quiz-navigation",children:(0,f.jsx)("button",{className:"next-button",onClick:ye,disabled:!P,children:T<O.length-1?"Sonraki Soru":"Quiz'i Bitir"})})]})]})}}}]);
//# sourceMappingURL=363.2a10d552.chunk.js.map