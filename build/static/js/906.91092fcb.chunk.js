"use strict";(self.webpackChunkyks_quiz=self.webpackChunkyks_quiz||[]).push([[906],{8906:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var r=s(5043),t=s(108),i=s(5748),c=s(7734),n=s(2185),d=s(6026),h=s(6150),l=s(168),o=s(8420),m=s(8763),x=s(3831),j=(0,o.gu)({chartName:"BarChart",GraphicalChild:m.y,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:n.W},{axisType:"yAxis",AxisComp:d.h}],formatAxisMap:x.pr}),u=s(7574),p=s(1185),v=s(4298),g=s(579);const y=()=>{const{getMetrics:e,reportMetrics:a}=(0,u.eu)(),[s,o]=(0,r.useState)([]),[x,y]=(0,r.useState)(!1),[N,f]=(0,r.useState)(null),{variant:k,config:C}=(0,p.HC)("quiz_ui_variant"),{variant:T,config:S}=(0,p.HC)("question_loading"),b=()=>{var a;const s=(0,u.pX)(),r=(0,u.zu)(),t=e(),i={timestamp:Date.now(),memoryUsage:s?s.usedJSHeapSize/s.jsHeapSizeLimit*100:0,networkSpeed:r?r.downlink:0,loadTime:t.fetchQuestions?t.fetchQuestions.reduce((e,a)=>e+a,0)/t.fetchQuestions.length:0,cacheHitRate:t.cache_hit?t.cache_hit.length/(t.cache_hit.length+((null===(a=t.fetch_error)||void 0===a?void 0:a.length)||0))*100:0};o(e=>[...e.slice(-20),i])},w=(0,r.useMemo)(()=>s.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),memory:e.memoryUsage,network:e.networkSpeed,loadTime:e.loadTime,cacheHitRate:e.cacheHitRate})),[s]),H=(0,r.useMemo)(()=>{if(0===s.length)return null;const e=s[s.length-1],a=s.reduce((e,a)=>e+a.memoryUsage,0)/s.length,r=s.reduce((e,a)=>e+a.loadTime,0)/s.length,t=s.reduce((e,a)=>e+a.cacheHitRate,0)/s.length;return{currentMemory:(null===e||void 0===e?void 0:e.memoryUsage)||0,averageMemory:a,currentLoadTime:(null===e||void 0===e?void 0:e.loadTime)||0,averageLoadTime:r,currentCacheHitRate:(null===e||void 0===e?void 0:e.cacheHitRate)||0,averageCacheHitRate:t,dataPoints:s.length}},[s]);return(0,r.useEffect)(()=>()=>{N&&clearInterval(N)},[N]),(0,g.jsx)(v.N4,{variant:"admin",showParticles:!0,particleCount:6,children:(0,g.jsxs)("div",{className:"performance-dashboard",children:[(0,g.jsxs)("div",{className:"dashboard-header",children:[(0,g.jsx)("h1",{children:"Performance Dashboard"}),(0,g.jsx)("button",{onClick:()=>{if(x)N&&(clearInterval(N),f(null)),y(!1);else{const e=setInterval(()=>{b()},5e3);f(e),y(!0)}},className:"monitoring-btn "+(x?"active":""),children:x?"Stop Monitoring":"Start Monitoring"})]}),(0,g.jsxs)("div",{className:"ab-test-section",children:[(0,g.jsx)("h2",{children:"AB Test Status"}),(0,g.jsxs)("div",{className:"ab-test-grid",children:[(0,g.jsxs)("div",{className:"ab-test-card",children:[(0,g.jsx)("h3",{children:"UI Variant"}),(0,g.jsxs)("p",{children:["Current: ",k]}),(0,g.jsxs)("p",{children:["Progress Bar: ",C.showProgressBar?"Yes":"No"]}),(0,g.jsxs)("p",{children:["Animation Speed: ",C.animationSpeed]})]}),(0,g.jsxs)("div",{className:"ab-test-card",children:[(0,g.jsx)("h3",{children:"Loading Variant"}),(0,g.jsxs)("p",{children:["Current: ",T]}),(0,g.jsxs)("p",{children:["Cache Size: ",S.cacheSize]}),(0,g.jsxs)("p",{children:["Strategy: ",S.loadingStrategy]})]})]})]}),H&&(0,g.jsxs)("div",{className:"performance-summary",children:[(0,g.jsx)("h2",{children:"Performance Summary"}),(0,g.jsxs)("div",{className:"summary-grid",children:[(0,g.jsxs)("div",{className:"summary-card",children:[(0,g.jsx)("h3",{children:"Memory Usage"}),(0,g.jsxs)("p",{className:"current",children:[H.currentMemory.toFixed(2),"%"]}),(0,g.jsxs)("p",{className:"average",children:["Avg: ",H.averageMemory.toFixed(2),"%"]})]}),(0,g.jsxs)("div",{className:"summary-card",children:[(0,g.jsx)("h3",{children:"Load Time"}),(0,g.jsxs)("p",{className:"current",children:[H.currentLoadTime.toFixed(2),"ms"]}),(0,g.jsxs)("p",{className:"average",children:["Avg: ",H.averageLoadTime.toFixed(2),"ms"]})]}),(0,g.jsxs)("div",{className:"summary-card",children:[(0,g.jsx)("h3",{children:"Cache Hit Rate"}),(0,g.jsxs)("p",{className:"current",children:[H.currentCacheHitRate.toFixed(2),"%"]}),(0,g.jsxs)("p",{className:"average",children:["Avg: ",H.averageCacheHitRate.toFixed(2),"%"]})]}),(0,g.jsxs)("div",{className:"summary-card",children:[(0,g.jsx)("h3",{children:"Data Points"}),(0,g.jsx)("p",{className:"current",children:H.dataPoints})]})]})]}),w.length>0&&(0,g.jsxs)("div",{className:"charts-section",children:[(0,g.jsx)("h2",{children:"Performance Charts"}),(0,g.jsxs)("div",{className:"chart-grid",children:[(0,g.jsxs)("div",{className:"chart-container",children:[(0,g.jsx)("h3",{children:"Memory Usage Over Time"}),(0,g.jsx)(t.u,{width:"100%",height:300,children:(0,g.jsxs)(i.b,{data:w,children:[(0,g.jsx)(c.d,{strokeDasharray:"3 3"}),(0,g.jsx)(n.W,{dataKey:"time"}),(0,g.jsx)(d.h,{}),(0,g.jsx)(h.m,{}),(0,g.jsx)(l.N,{type:"monotone",dataKey:"memory",stroke:"#8884d8"})]})})]}),(0,g.jsxs)("div",{className:"chart-container",children:[(0,g.jsx)("h3",{children:"Load Time Over Time"}),(0,g.jsx)(t.u,{width:"100%",height:300,children:(0,g.jsxs)(i.b,{data:w,children:[(0,g.jsx)(c.d,{strokeDasharray:"3 3"}),(0,g.jsx)(n.W,{dataKey:"time"}),(0,g.jsx)(d.h,{}),(0,g.jsx)(h.m,{}),(0,g.jsx)(l.N,{type:"monotone",dataKey:"loadTime",stroke:"#82ca9d"})]})})]}),(0,g.jsxs)("div",{className:"chart-container",children:[(0,g.jsx)("h3",{children:"Cache Hit Rate"}),(0,g.jsx)(t.u,{width:"100%",height:300,children:(0,g.jsxs)(j,{data:w,children:[(0,g.jsx)(c.d,{strokeDasharray:"3 3"}),(0,g.jsx)(n.W,{dataKey:"time"}),(0,g.jsx)(d.h,{}),(0,g.jsx)(h.m,{}),(0,g.jsx)(m.y,{dataKey:"cacheHitRate",fill:"#8884d8"})]})})]}),(0,g.jsxs)("div",{className:"chart-container",children:[(0,g.jsx)("h3",{children:"Network Speed"}),(0,g.jsx)(t.u,{width:"100%",height:300,children:(0,g.jsxs)(i.b,{data:w,children:[(0,g.jsx)(c.d,{strokeDasharray:"3 3"}),(0,g.jsx)(n.W,{dataKey:"time"}),(0,g.jsx)(d.h,{}),(0,g.jsx)(h.m,{}),(0,g.jsx)(l.N,{type:"monotone",dataKey:"network",stroke:"#ffc658"})]})})]})]})]}),(0,g.jsxs)("div",{className:"export-section",children:[(0,g.jsx)("h2",{children:"Export Data"}),(0,g.jsx)("button",{onClick:()=>a(),children:"Export Metrics"}),(0,g.jsx)("button",{onClick:()=>{const e=JSON.stringify(s,null,2),a=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(a),t=document.createElement("a");t.href=r,t.download="performance-data.json",t.click()},children:"Export Performance Data"})]})]})})}}}]);
//# sourceMappingURL=906.91092fcb.chunk.js.map