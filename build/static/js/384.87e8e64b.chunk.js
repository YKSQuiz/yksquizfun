"use strict";(self.webpackChunkyks_quiz=self.webpackChunkyks_quiz||[]).push([[384],{5384:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var s=r(5043),a=r(108),n=r(5748),i=r(7734),c=r(2185),o=r(6026),d=r(6150),h=r(168),l=r(2291),m=r(8763),u=r(7574),x=r(1185),j=r(579);const g=()=>{const{getMetrics:e,reportMetrics:t}=(0,u.eu)(),[r,g]=(0,s.useState)([]),[p,v]=(0,s.useState)(!1),[y,f]=(0,s.useState)(null),{variant:w,config:S}=(0,x.HC)("quiz_ui_variant"),{variant:N,config:b}=(0,x.HC)("question_loading"),M=()=>{var t;const r=(0,u.pX)(),s=(0,u.zu)(),a=e(),n={timestamp:Date.now(),memoryUsage:r?r.usedJSHeapSize/r.jsHeapSizeLimit*100:0,networkSpeed:s?s.downlink:0,loadTime:a.fetchQuestions?a.fetchQuestions.reduce((e,t)=>e+t,0)/a.fetchQuestions.length:0,cacheHitRate:a.cache_hit?a.cache_hit.length/(a.cache_hit.length+((null===(t=a.fetch_error)||void 0===t?void 0:t.length)||0))*100:0};g(e=>[...e.slice(-20),n])},k=(0,s.useMemo)(()=>r.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),memory:e.memoryUsage,network:e.networkSpeed,loadTime:e.loadTime,cacheHitRate:e.cacheHitRate})),[r]),T=(0,s.useMemo)(()=>{if(0===r.length)return null;const e=r[r.length-1],t=r.reduce((e,t)=>e+t.memoryUsage,0)/r.length,s=r.reduce((e,t)=>e+t.loadTime,0)/r.length,a=r.reduce((e,t)=>e+t.cacheHitRate,0)/r.length;return{currentMemory:e.memoryUsage,averageMemory:t,currentLoadTime:e.loadTime,averageLoadTime:s,currentCacheHitRate:e.cacheHitRate,averageCacheHitRate:a,dataPoints:r.length}},[r]);(0,s.useEffect)(()=>()=>{y&&clearInterval(y)},[y]);return(0,j.jsxs)("div",{className:"performance-dashboard",children:[(0,j.jsxs)("div",{className:"dashboard-header",children:[(0,j.jsx)("h1",{children:"Performance Dashboard"}),(0,j.jsx)("button",{onClick:()=>{if(p)y&&(clearInterval(y),f(null)),v(!1);else{const e=setInterval(()=>{M()},5e3);f(e),v(!0)}},className:"monitoring-btn ".concat(p?"active":""),children:p?"Stop Monitoring":"Start Monitoring"})]}),(0,j.jsxs)("div",{className:"ab-test-section",children:[(0,j.jsx)("h2",{children:"AB Test Status"}),(0,j.jsxs)("div",{className:"ab-test-grid",children:[(0,j.jsxs)("div",{className:"ab-test-card",children:[(0,j.jsx)("h3",{children:"UI Variant"}),(0,j.jsxs)("p",{children:["Current: ",w]}),(0,j.jsxs)("p",{children:["Progress Bar: ",S.showProgressBar?"Yes":"No"]}),(0,j.jsxs)("p",{children:["Animation Speed: ",S.animationSpeed]})]}),(0,j.jsxs)("div",{className:"ab-test-card",children:[(0,j.jsx)("h3",{children:"Loading Variant"}),(0,j.jsxs)("p",{children:["Current: ",N]}),(0,j.jsxs)("p",{children:["Cache Size: ",b.cacheSize]}),(0,j.jsxs)("p",{children:["Strategy: ",b.loadingStrategy]})]})]})]}),T&&(0,j.jsxs)("div",{className:"performance-summary",children:[(0,j.jsx)("h2",{children:"Performance Summary"}),(0,j.jsxs)("div",{className:"summary-grid",children:[(0,j.jsxs)("div",{className:"summary-card",children:[(0,j.jsx)("h3",{children:"Memory Usage"}),(0,j.jsxs)("p",{className:"current",children:[T.currentMemory.toFixed(2),"%"]}),(0,j.jsxs)("p",{className:"average",children:["Avg: ",T.averageMemory.toFixed(2),"%"]})]}),(0,j.jsxs)("div",{className:"summary-card",children:[(0,j.jsx)("h3",{children:"Load Time"}),(0,j.jsxs)("p",{className:"current",children:[T.currentLoadTime.toFixed(2),"ms"]}),(0,j.jsxs)("p",{className:"average",children:["Avg: ",T.averageLoadTime.toFixed(2),"ms"]})]}),(0,j.jsxs)("div",{className:"summary-card",children:[(0,j.jsx)("h3",{children:"Cache Hit Rate"}),(0,j.jsxs)("p",{className:"current",children:[T.currentCacheHitRate.toFixed(2),"%"]}),(0,j.jsxs)("p",{className:"average",children:["Avg: ",T.averageCacheHitRate.toFixed(2),"%"]})]}),(0,j.jsxs)("div",{className:"summary-card",children:[(0,j.jsx)("h3",{children:"Data Points"}),(0,j.jsx)("p",{className:"current",children:T.dataPoints})]})]})]}),k.length>0&&(0,j.jsxs)("div",{className:"charts-section",children:[(0,j.jsx)("h2",{children:"Performance Charts"}),(0,j.jsxs)("div",{className:"chart-grid",children:[(0,j.jsxs)("div",{className:"chart-container",children:[(0,j.jsx)("h3",{children:"Memory Usage Over Time"}),(0,j.jsx)(a.u,{width:"100%",height:300,children:(0,j.jsxs)(n.b,{data:k,children:[(0,j.jsx)(i.d,{strokeDasharray:"3 3"}),(0,j.jsx)(c.W,{dataKey:"time"}),(0,j.jsx)(o.h,{}),(0,j.jsx)(d.m,{}),(0,j.jsx)(h.N,{type:"monotone",dataKey:"memory",stroke:"#8884d8"})]})})]}),(0,j.jsxs)("div",{className:"chart-container",children:[(0,j.jsx)("h3",{children:"Load Time Over Time"}),(0,j.jsx)(a.u,{width:"100%",height:300,children:(0,j.jsxs)(n.b,{data:k,children:[(0,j.jsx)(i.d,{strokeDasharray:"3 3"}),(0,j.jsx)(c.W,{dataKey:"time"}),(0,j.jsx)(o.h,{}),(0,j.jsx)(d.m,{}),(0,j.jsx)(h.N,{type:"monotone",dataKey:"loadTime",stroke:"#82ca9d"})]})})]}),(0,j.jsxs)("div",{className:"chart-container",children:[(0,j.jsx)("h3",{children:"Cache Hit Rate"}),(0,j.jsx)(a.u,{width:"100%",height:300,children:(0,j.jsxs)(l.E,{data:k,children:[(0,j.jsx)(i.d,{strokeDasharray:"3 3"}),(0,j.jsx)(c.W,{dataKey:"time"}),(0,j.jsx)(o.h,{}),(0,j.jsx)(d.m,{}),(0,j.jsx)(m.y,{dataKey:"cacheHitRate",fill:"#8884d8"})]})})]}),(0,j.jsxs)("div",{className:"chart-container",children:[(0,j.jsx)("h3",{children:"Network Speed"}),(0,j.jsx)(a.u,{width:"100%",height:300,children:(0,j.jsxs)(n.b,{data:k,children:[(0,j.jsx)(i.d,{strokeDasharray:"3 3"}),(0,j.jsx)(c.W,{dataKey:"time"}),(0,j.jsx)(o.h,{}),(0,j.jsx)(d.m,{}),(0,j.jsx)(h.N,{type:"monotone",dataKey:"network",stroke:"#ffc658"})]})})]})]})]}),(0,j.jsxs)("div",{className:"export-section",children:[(0,j.jsx)("h2",{children:"Export Data"}),(0,j.jsx)("button",{onClick:()=>t(),children:"Export Metrics"}),(0,j.jsx)("button",{onClick:()=>{const e=JSON.stringify(r,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="performance-data.json",a.click()},children:"Export Performance Data"})]})]})}},7574:(e,t,r)=>{r.d(t,{eu:()=>a,pX:()=>n,zu:()=>i});class s{constructor(){this.metrics=new Map,this.observers=[],this.initObservers()}static getInstance(){return s.instance||(s.instance=new s),s.instance}initObservers(){if("PerformanceObserver"in window){const t=new PerformanceObserver(e=>{for(const t of e.getEntries())if("navigation"===t.entryType){const e=t;this.recordMetric("navigation",e.loadEventEnd-e.loadEventStart)}});try{t.observe({entryTypes:["navigation"]}),this.observers.push(t)}catch(e){console.warn("Navigation timing not supported")}const r=new PerformanceObserver(e=>{for(const t of e.getEntries())"paint"===t.entryType&&this.recordMetric("paint",t.startTime)});try{r.observe({entryTypes:["paint"]}),this.observers.push(r)}catch(e){console.warn("Paint timing not supported")}}}recordMetric(e,t){this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push(t)}getAverageMetric(e){const t=this.metrics.get(e);return t&&0!==t.length?t.reduce((e,t)=>e+t,0)/t.length:0}getMetrics(){const e={};return this.metrics.forEach((t,r)=>{e[r]=[...t]}),e}measureAsync(e,t){const r=performance.now();return t().finally(()=>{const t=performance.now()-r;this.recordMetric(e,t)})}measureSync(e,t){const r=performance.now();try{return t()}finally{const t=performance.now()-r;this.recordMetric(e,t)}}reportMetrics(){const e=this.getMetrics();console.log("Performance Metrics:",e),this.sendToAnalytics(e)}sendToAnalytics(e){try{"undefined"!==typeof window&&window.gtag&&Object.entries(e).forEach(e=>{let[t,r]=e;const s=r.reduce((e,t)=>e+t,0)/r.length;window.gtag("event","performance_metric",{metric_name:t,metric_value:s,metric_count:r.length})})}catch(t){console.warn("Failed to send metrics to analytics:",t)}}destroy(){this.observers.forEach(e=>e.disconnect()),this.observers=[],this.metrics.clear()}}s.instance=void 0;const a=()=>{const e=s.getInstance();return{measureAsync:(t,r)=>e.measureAsync(t,r),measureSync:(t,r)=>e.measureSync(t,r),recordMetric:(t,r)=>{e.recordMetric(t,r)},getMetrics:()=>e.getMetrics(),reportMetrics:()=>e.reportMetrics()}},n=()=>{if("memory"in performance){const e=performance.memory;return{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit}}return null},i=()=>{if("connection"in navigator){const e=navigator.connection;return{effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt}}return null}}}]);
//# sourceMappingURL=384.87e8e64b.chunk.js.map