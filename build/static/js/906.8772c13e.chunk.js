"use strict";(self.webpackChunkyks_quiz=self.webpackChunkyks_quiz||[]).push([[906],{8906:(e,a,s)=>{s.r(a),s.d(a,{default:()=>g});var r=s(5043),t=s(108),i=s(5748),c=s(7734),n=s(2185),d=s(6026),h=s(6150),l=s(168),o=s(8420),m=s(8763),x=s(3831),j=(0,o.gu)({chartName:"BarChart",GraphicalChild:m.y,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:n.W},{axisType:"yAxis",AxisComp:d.h}],formatAxisMap:x.pr}),u=s(7574),p=s(1185),v=s(579);const g=()=>{const{getMetrics:e,reportMetrics:a}=(0,u.eu)(),[s,o]=(0,r.useState)([]),[x,g]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null),{variant:f,config:k}=(0,p.HC)("quiz_ui_variant"),{variant:C,config:T}=(0,p.HC)("question_loading"),S=()=>{var a;const s=(0,u.pX)(),r=(0,u.zu)(),t=e(),i={timestamp:Date.now(),memoryUsage:s?s.usedJSHeapSize/s.jsHeapSizeLimit*100:0,networkSpeed:r?r.downlink:0,loadTime:t.fetchQuestions?t.fetchQuestions.reduce((e,a)=>e+a,0)/t.fetchQuestions.length:0,cacheHitRate:t.cache_hit?t.cache_hit.length/(t.cache_hit.length+((null===(a=t.fetch_error)||void 0===a?void 0:a.length)||0))*100:0};o(e=>[...e.slice(-20),i])},b=(0,r.useMemo)(()=>s.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),memory:e.memoryUsage,network:e.networkSpeed,loadTime:e.loadTime,cacheHitRate:e.cacheHitRate})),[s]),w=(0,r.useMemo)(()=>{if(0===s.length)return null;const e=s[s.length-1],a=s.reduce((e,a)=>e+a.memoryUsage,0)/s.length,r=s.reduce((e,a)=>e+a.loadTime,0)/s.length,t=s.reduce((e,a)=>e+a.cacheHitRate,0)/s.length;return{currentMemory:(null===e||void 0===e?void 0:e.memoryUsage)||0,averageMemory:a,currentLoadTime:(null===e||void 0===e?void 0:e.loadTime)||0,averageLoadTime:r,currentCacheHitRate:(null===e||void 0===e?void 0:e.cacheHitRate)||0,averageCacheHitRate:t,dataPoints:s.length}},[s]);return(0,r.useEffect)(()=>()=>{y&&clearInterval(y)},[y]),(0,v.jsxs)("div",{className:"performance-dashboard",children:[(0,v.jsxs)("div",{className:"dashboard-header",children:[(0,v.jsx)("h1",{children:"Performance Dashboard"}),(0,v.jsx)("button",{onClick:()=>{if(x)y&&(clearInterval(y),N(null)),g(!1);else{const e=setInterval(()=>{S()},5e3);N(e),g(!0)}},className:"monitoring-btn "+(x?"active":""),children:x?"Stop Monitoring":"Start Monitoring"})]}),(0,v.jsxs)("div",{className:"ab-test-section",children:[(0,v.jsx)("h2",{children:"AB Test Status"}),(0,v.jsxs)("div",{className:"ab-test-grid",children:[(0,v.jsxs)("div",{className:"ab-test-card",children:[(0,v.jsx)("h3",{children:"UI Variant"}),(0,v.jsxs)("p",{children:["Current: ",f]}),(0,v.jsxs)("p",{children:["Progress Bar: ",k.showProgressBar?"Yes":"No"]}),(0,v.jsxs)("p",{children:["Animation Speed: ",k.animationSpeed]})]}),(0,v.jsxs)("div",{className:"ab-test-card",children:[(0,v.jsx)("h3",{children:"Loading Variant"}),(0,v.jsxs)("p",{children:["Current: ",C]}),(0,v.jsxs)("p",{children:["Cache Size: ",T.cacheSize]}),(0,v.jsxs)("p",{children:["Strategy: ",T.loadingStrategy]})]})]})]}),w&&(0,v.jsxs)("div",{className:"performance-summary",children:[(0,v.jsx)("h2",{children:"Performance Summary"}),(0,v.jsxs)("div",{className:"summary-grid",children:[(0,v.jsxs)("div",{className:"summary-card",children:[(0,v.jsx)("h3",{children:"Memory Usage"}),(0,v.jsxs)("p",{className:"current",children:[w.currentMemory.toFixed(2),"%"]}),(0,v.jsxs)("p",{className:"average",children:["Avg: ",w.averageMemory.toFixed(2),"%"]})]}),(0,v.jsxs)("div",{className:"summary-card",children:[(0,v.jsx)("h3",{children:"Load Time"}),(0,v.jsxs)("p",{className:"current",children:[w.currentLoadTime.toFixed(2),"ms"]}),(0,v.jsxs)("p",{className:"average",children:["Avg: ",w.averageLoadTime.toFixed(2),"ms"]})]}),(0,v.jsxs)("div",{className:"summary-card",children:[(0,v.jsx)("h3",{children:"Cache Hit Rate"}),(0,v.jsxs)("p",{className:"current",children:[w.currentCacheHitRate.toFixed(2),"%"]}),(0,v.jsxs)("p",{className:"average",children:["Avg: ",w.averageCacheHitRate.toFixed(2),"%"]})]}),(0,v.jsxs)("div",{className:"summary-card",children:[(0,v.jsx)("h3",{children:"Data Points"}),(0,v.jsx)("p",{className:"current",children:w.dataPoints})]})]})]}),b.length>0&&(0,v.jsxs)("div",{className:"charts-section",children:[(0,v.jsx)("h2",{children:"Performance Charts"}),(0,v.jsxs)("div",{className:"chart-grid",children:[(0,v.jsxs)("div",{className:"chart-container",children:[(0,v.jsx)("h3",{children:"Memory Usage Over Time"}),(0,v.jsx)(t.u,{width:"100%",height:300,children:(0,v.jsxs)(i.b,{data:b,children:[(0,v.jsx)(c.d,{strokeDasharray:"3 3"}),(0,v.jsx)(n.W,{dataKey:"time"}),(0,v.jsx)(d.h,{}),(0,v.jsx)(h.m,{}),(0,v.jsx)(l.N,{type:"monotone",dataKey:"memory",stroke:"#8884d8"})]})})]}),(0,v.jsxs)("div",{className:"chart-container",children:[(0,v.jsx)("h3",{children:"Load Time Over Time"}),(0,v.jsx)(t.u,{width:"100%",height:300,children:(0,v.jsxs)(i.b,{data:b,children:[(0,v.jsx)(c.d,{strokeDasharray:"3 3"}),(0,v.jsx)(n.W,{dataKey:"time"}),(0,v.jsx)(d.h,{}),(0,v.jsx)(h.m,{}),(0,v.jsx)(l.N,{type:"monotone",dataKey:"loadTime",stroke:"#82ca9d"})]})})]}),(0,v.jsxs)("div",{className:"chart-container",children:[(0,v.jsx)("h3",{children:"Cache Hit Rate"}),(0,v.jsx)(t.u,{width:"100%",height:300,children:(0,v.jsxs)(j,{data:b,children:[(0,v.jsx)(c.d,{strokeDasharray:"3 3"}),(0,v.jsx)(n.W,{dataKey:"time"}),(0,v.jsx)(d.h,{}),(0,v.jsx)(h.m,{}),(0,v.jsx)(m.y,{dataKey:"cacheHitRate",fill:"#8884d8"})]})})]}),(0,v.jsxs)("div",{className:"chart-container",children:[(0,v.jsx)("h3",{children:"Network Speed"}),(0,v.jsx)(t.u,{width:"100%",height:300,children:(0,v.jsxs)(i.b,{data:b,children:[(0,v.jsx)(c.d,{strokeDasharray:"3 3"}),(0,v.jsx)(n.W,{dataKey:"time"}),(0,v.jsx)(d.h,{}),(0,v.jsx)(h.m,{}),(0,v.jsx)(l.N,{type:"monotone",dataKey:"network",stroke:"#ffc658"})]})})]})]})]}),(0,v.jsxs)("div",{className:"export-section",children:[(0,v.jsx)("h2",{children:"Export Data"}),(0,v.jsx)("button",{onClick:()=>a(),children:"Export Metrics"}),(0,v.jsx)("button",{onClick:()=>{const e=JSON.stringify(s,null,2),a=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(a),t=document.createElement("a");t.href=r,t.download="performance-data.json",t.click()},children:"Export Performance Data"})]})]})}}}]);
//# sourceMappingURL=906.8772c13e.chunk.js.map